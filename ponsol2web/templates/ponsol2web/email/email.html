{% load static %}
{% load my_filter %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Home {% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static "ponsol2web/button.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "ponsol2web/base_style.css" %}">
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="{% static "ponsol2web/css/bootstrap.min.css" %}">
    <!-- Custom styles for this template -->
    <link href="{% static "ponsol2web/css/justified-nav.css" %}" rel="stylesheet">
</head>
<body style="padding-top: 0">
<div class="container">
    {% if to_mail %}
        <p>
            Notice: This message is send to {{ to_mail }} <br>
            Message ->
        </p>
    {% endif %}
    <p>
    <p>
        Dear friend, <br><br>
        Thank you for using PON-Sol2. <br><br>
        The result of your submit is followed: <br><br>
    </p>

    <div>
        {# 分组数据 #}
        {% if record_group %}
            {% for record_list in record_group %}
                <div>
                <p>
                    Protein {{ forloop.counter }}:
                    {% if record_list.0.seq_id %}
                        {{ record_list.0.get_seq_id_type_display }} is {{ record_list.0.seq_id }};
                    {% else %}
                        No ID provided;
                    {% endif %}
                    Protein name: {{ record_list.0.name | shorten_str }};
                    Protein sequence: {{ record_list.0.seq | shorten_str }};
                </p>
                <table>
                    <tr>
                        <td>#</td>
                        <td>Variation</td>
                        <td>Predict result</td>
                        <td>Remark</td>
                    </tr>
                    {% for record in record_list %}
                        <tr class="row">

                            <td> {{ forloop.counter }}</td>
                            <td>
                                {{ record.aa }}
                            </td>
                            <td>
                                {% if record.solubility %}
                                    {{ record.get_solubility_display }}
                                {% else %}
                                    <span class="text-danger">
                                                {{ record.status }}
                                        </span>
                                {% endif %}
                            </td>
                            <td>
                                {% if record.error_msg %}
                                    {{ record.error_msg }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% endfor %}
        {% else %}
            No valid variation input.
        {% endif %}
        <div>
            <br>
            <p>
                If you find that there is no result or some variation have been missed, it is usually due to an
                incorrect input format.
                Please check wheather variation can match corresponding FASTA sequence.
            </p>
        </div>
        <p>
            <br>You can also go to the Result page of PON-Sol2 website to see more detailed information{{ url }}.
            <br><br>

            Best regards, <br><br>

            =============================================================================================== <br>
            Yang Yang (1,2), Lianjie Zeng (1) and Mauno Vihinen (2) <br>
            1. School of Computer Science and Technology, Soochow University, 215006, China, Town, State, Postcode,
            Country
            <br>
            2. Department of Experimental Medical Science, Lund University, BMC B13, SE-221 84 Lund, Sweden. <br>
            * If you have any problems, please contact Lianjie Zeng (1709404010@stu.suda.edu.cn). <br>
        </p>
        </div>
</body>
<!-- jQuery (Bootstrap 的 JavaScript 插件需要引入 jQuery) -->
<script src="{% static "ponsol2web/js/jquery.min.js" %}"></script>
<!-- 包括所有已编译的插件 -->
<script src="{% static "ponsol2web/js/bootstrap.min.js" %}"></script>
</html>
